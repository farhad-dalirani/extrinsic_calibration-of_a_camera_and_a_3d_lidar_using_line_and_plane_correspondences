need to replace line detection